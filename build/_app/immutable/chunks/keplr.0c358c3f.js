import{b as w}from"./browser.ba54d07b.js";import{c as o,i as p,k as d,d as u,s as g,r as k}from"./stores.f5498d42.js";import"./index.2714c59a.js";import{w as f}from"./index.931c317b.js";import"./ProgressBar.svelte_svelte_type_style_lang.19407a33.js";function y(){const{subscribe:e,set:t,update:s}=f([]);return{subscribe:e,set:t,update:s,trigger:r=>s(i=>(i.push(r),i)),close:()=>s(r=>(r.length>0&&r.shift(),r)),clear:()=>t([])}}const m=y(),K={type:"alert",title:"No Wallet Detected",body:`
		<p>Please install a Secret Network wallet<p>
	`,buttonTextCancel:"OK",modalClasses:"variant-ghost-error"},n=o["Secret Network"].chain_id,b=o["Secret Network"].lcd;async function N(){var e;await((e=window.keplr)==null?void 0:e.disable(n)),k()}async function O(){if(!window.keplr)m.trigger(K);else{const e=a=>new Promise(c=>setTimeout(c,a));for(;!window.keplr||!window.keplr.getEnigmaUtils||!window.keplr.getOfflineSignerOnlyAmino;)await e(50);await window.keplr.enable(n),window.keplr.defaultOptions={sign:{preferNoSetFee:!1,disableBalanceCheck:!1}};const t=window.keplr.getOfflineSignerOnlyAmino(n),r=(await t.getAccounts())[0].address,i=new w.SecretNetworkClient({url:b,chainId:n,wallet:t,walletAddress:r,encryptionUtils:window.keplr.getEnigmaUtils(n)}),l=await window.keplr.getKey(n);p.set(!0),d.set(l),u.set(r),g.set(i)}}async function T(e){if(!window.keplr){console.error("Keplr not present");return}try{await window.keplr.suggestToken(n,e)}catch(t){console.log(t)}}async function _(e){if(!window.keplr)return console.error("Keplr not present"),null;try{return await window.keplr.getSecret20ViewingKey(n,e)}catch{return null}}export{T as a,N as d,_ as g,m,O as s};
