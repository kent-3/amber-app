import{w as l,p as w,n as p,o as d,j as g,k as u,r as f}from"./stores.12a44de9.js";import"./index.89050948.js";import{w as k}from"./index.aa6b1d59.js";function y(){const{subscribe:e,set:t,update:s}=k([]);return{subscribe:e,set:t,update:s,trigger:n=>s(i=>(i.push(n),i)),close:()=>s(n=>(n.length>0&&n.shift(),n)),clear:()=>t([])}}const m=y(),K={type:"alert",title:"No Wallet Detected",body:`
		<p>Please install a Secret Network wallet<p>
	`,buttonTextCancel:"OK",modalClasses:"!w-modal-slim !ring-[1.5px] !ring-error-500"},r=l["Secret Network"].chain_id,S=l["Secret Network"].lcd;async function A(){var e;await((e=window.keplr)==null?void 0:e.disable(r)),f()}async function N(){if(!window.keplr)m.trigger(K);else{const e=a=>new Promise(c=>setTimeout(c,a));for(;!window.keplr||!window.keplr.getEnigmaUtils||!window.keplr.getOfflineSignerOnlyAmino;)await e(50);await window.keplr.enable(r),window.keplr.defaultOptions={sign:{preferNoSetFee:!1,disableBalanceCheck:!1}};const t=window.keplr.getOfflineSignerOnlyAmino(r),n=(await t.getAccounts())[0].address,i=new w.SecretNetworkClient({url:S,chainId:r,wallet:t,walletAddress:n,encryptionUtils:window.keplr.getEnigmaUtils(r)}),o=await window.keplr.getKey(r);p.set(!0),d.set(o),g.set(n),u.set(i)}}async function O(e){if(!window.keplr){console.error("Keplr not present");return}window.keplr.defaultOptions={sign:{preferNoSetFee:!1,disableBalanceCheck:!1}};try{await window.keplr.suggestToken(r,e)}catch(t){console.log(t)}}async function E(e){if(!window.keplr)return console.error("Keplr not present"),null;try{return await window.keplr.getSecret20ViewingKey(r,e)}catch{return null}}export{O as a,A as d,E as g,m,N as s};
